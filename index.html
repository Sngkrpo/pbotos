<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü–ë–û–¢–û–° - –°–æ–æ–±—â–∏—Ç—å –æ –Ω–∞—Ä—É—à–µ–Ω–∏–∏</title>
    
    <!-- PWA –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ -->
    <meta name="theme-color" content="#121212">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="–ü–ë–û–¢–û–°">
    <link rel="manifest" href="manifest.json">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #121212;
            color: white;
            min-height: 100vh;
            padding: 20px;
            line-height: 1.4;
        }

        .container {
            max-width: 100%;
            margin: 0 auto;
        }

        /* –°–¢–†–ê–ù–ò–¶–´ */
        .page {
            display: none;
            animation: fadeIn 0.3s ease-in-out;
        }

        .page.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* –®–ê–ü–ö–ò */
        .header {
            text-align: center;
            padding: 30px 20px;
            margin-bottom: 30px;
        }

        .header h1 {
            font-size: 2rem;
            margin-bottom: 10px;
            color: #ffd200;
        }

        .header p {
            color: #ccc;
            font-size: 1rem;
        }

        /* –ö–ù–û–ü–ö–ò –ò –ò–ö–û–ù–ö–ò */
        .button-grid {
            display: grid;
            gap: 15px;
            margin-bottom: 30px;
        }

        .big-button {
            background: linear-gradient(135deg, #2a2a2a, #1a1a1a);
            border: 2px solid #333;
            border-radius: 20px;
            padding: 25px;
            color: white;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }

        .big-button:hover {
            transform: translateY(-2px);
            border-color: #ffd200;
            box-shadow: 0 8px 25px rgba(255, 210, 0, 0.2);
        }

        .big-button .icon {
            font-size: 2rem;
        }

        /* –ò–ö–û–ù–û–ß–ù–´–ï –ö–ù–û–ü–ö–ò */
        .icon-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-bottom: 30px;
        }

        .icon-button {
            background: linear-gradient(135deg, #2a2a2a, #1a1a1a);
            border: 2px solid #333;
            border-radius: 15px;
            padding: 25px 15px;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
        }

        .icon-button:hover {
            transform: translateY(-2px);
            border-color: #007bff;
        }

        .icon-button .icon {
            font-size: 2.5rem;
            margin-bottom: 5px;
        }

        .icon-button .text {
            font-size: 0.9rem;
            font-weight: 500;
        }

        /* –ì–û–†–ò–ó–û–ù–¢–ê–õ–¨–ù–´–ô –°–ö–†–û–õ–õ */
        .scroll-container {
            display: flex;
            gap: 15px;
            overflow-x: auto;
            padding: 10px 5px;
            margin-bottom: 30px;
            scrollbar-width: none;
            -ms-overflow-style: none;
        }

        .scroll-container::-webkit-scrollbar {
            display: none;
        }

        .scroll-item {
            flex: 0 0 auto;
            width: 140px;
            background: linear-gradient(135deg, #2a2a2a, #1a1a1a);
            border: 2px solid #333;
            border-radius: 15px;
            padding: 20px 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .scroll-item:hover {
            border-color: #28a745;
        }

        .scroll-item .icon {
            font-size: 2rem;
            margin-bottom: 8px;
        }

        .scroll-item .text {
            font-size: 0.8rem;
            font-weight: 500;
        }

        /* –ö–†–£–ì–õ–´–ï –ò–ö–û–ù–ö–ò */
        .circle-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-bottom: 30px;
        }

        .circle-button {
            background: linear-gradient(135deg, #2a2a2a, #1a1a1a);
            border: 2px solid #333;
            border-radius: 50%;
            width: 100px;
            height: 100px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 0 auto;
        }

        .circle-button:hover {
            transform: scale(1.05);
            border-color: #dc3545;
        }

        .circle-button .icon {
            font-size: 2rem;
            margin-bottom: 5px;
        }

        .circle-button .text {
            font-size: 0.7rem;
            text-align: center;
            font-weight: 500;
        }

        /* –ü–û–õ–Ø –í–í–û–î–ê */
        .input-group {
            margin-bottom: 25px;
        }

        .input-label {
            display: block;
            margin-bottom: 10px;
            font-weight: 600;
            color: #ffd200;
            font-size: 1.1rem;
        }

        .text-input, .textarea-input {
            width: 100%;
            background: #2a2a2a;
            border: 2px solid #333;
            border-radius: 12px;
            padding: 15px;
            color: white;
            font-size: 1rem;
            resize: vertical;
        }

        .textarea-input {
            min-height: 120px;
        }

        .text-input:focus, .textarea-input:focus {
            outline: none;
            border-color: #ffd200;
        }

        /* –ö–ù–û–ü–ö–ò –ù–ê–í–ò–ì–ê–¶–ò–ò */
        .nav-buttons {
            display: flex;
            gap: 15px;
            margin-top: 30px;
        }

        .nav-button {
            flex: 1;
            padding: 16px;
            border: none;
            border-radius: 12px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .nav-button.back {
            background: #6c757d;
            color: white;
        }

        .nav-button.next {
            background: #28a745;
            color: white;
        }

        .nav-button.send {
            background: #dc3545;
            color: white;
        }

        .nav-button:hover {
            transform: translateY(-2px);
        }

        /* –ü–†–û–ì–†–ï–°–° –ë–ê–† */
        .progress-bar {
            width: 100%;
            height: 6px;
            background: #333;
            border-radius: 3px;
            margin: 20px 0;
            overflow: hidden;
        }

        .progress {
            height: 100%;
            background: linear-gradient(90deg, #007bff, #00b3ff);
            width: 0%;
            transition: width 0.4s ease;
        }

        .step-info {
            text-align: center;
            color: #ccc;
            font-size: 0.9rem;
            margin-bottom: 10px;
        }

        /* PWA –£–°–¢–ê–ù–û–í–ö–ê */
        .install-prompt {
            position: fixed;
            bottom: 20px;
            left: 20px;
            right: 20px;
            background: white;
            color: black;
            padding: 15px;
            border-radius: 12px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.3);
            display: none;
            z-index: 1000;
            text-align: center;
        }

        .install-prompt button {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            margin: 5px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
        }

        /* –ê–î–ê–ü–¢–ò–í–ù–û–°–¢–¨ */
        @media (max-width: 480px) {
            body {
                padding: 15px;
            }
            
            .header {
                padding: 20px 15px;
                margin-bottom: 20px;
            }
            
            .header h1 {
                font-size: 1.7rem;
            }
            
            .icon-grid {
                grid-template-columns: 1fr;
                gap: 12px;
            }
            
            .circle-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 12px;
            }
            
            .circle-button {
                width: 90px;
                height: 90px;
            }
            
            .big-button {
                padding: 20px;
                font-size: 1rem;
            }
        }
    </style>
</head>
<body>
    <!-- –û–∫–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ PWA -->
    <div class="install-prompt" id="installPrompt">
        <p><strong>–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ü–ë–û–¢–û–°</strong></p>
        <p>–î–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ —Å –¥–æ–º–∞—à–Ω–µ–≥–æ —ç–∫—Ä–∞–Ω–∞</p>
        <button onclick="installApp()">–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å</button>
        <button onclick="dismissPrompt()">–ü–æ–∑–∂–µ</button>
    </div>

    <div class="container">
        <!-- –°–¢–†–ê–ù–ò–¶–ê 1: –ü–†–ò–í–ï–¢–°–¢–í–ò–ï -->
        <div id="pageWelcome" class="page active">
            <div class="header">
                <h1>üö® –ü–ë–û–¢–û–°</h1>
                <p>–°–∏—Å—Ç–µ–º–∞ –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è –æ –Ω–∞—Ä—É—à–µ–Ω–∏—è—Ö –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏</p>
            </div>
            
            <div class="button-grid">
                <button class="big-button" onclick="showPage('pageReport')">
                    <span class="icon">üìù</span>
                    –ù–ê–ß–ê–¢–¨
                </button>
            </div>
        </div>

        <!-- –°–¢–†–ê–ù–ò–¶–ê 2: –í–´–ë–û–† –°–ü–û–°–û–ë–ê –°–û–û–ë–©–ï–ù–ò–Ø -->
        <div id="pageReport" class="page">
            <div class="header">
                <h1>–°–æ–æ–±—â–∏—Ç—å –æ –Ω–∞—Ä—É—à–µ–Ω–∏–∏</h1>
                <p>–í—ã–±–µ—Ä–∏—Ç–µ —Å–ø–æ—Å–æ–± —Å–≤—è–∑–∏</p>
            </div>
            
            <div class="icon-grid">
                <div class="icon-button" onclick="makeCall()">
                    <span class="icon">üìû</span>
                    <span class="text">–ü–æ–∑–≤–æ–Ω–∏—Ç—å</span>
                </div>
                
                <div class="icon-button" onclick="startSteps('sms')">
                    <span class="icon">üí¨</span>
                    <span class="text">SMS</span>
                </div>
                
                <div class="icon-button" onclick="startSteps('wa')">
                    <span class="icon">üíö</span>
                    <span class="text">WhatsApp</span>
                </div>
                
                <div class="icon-button" onclick="startSteps('tg')">
                    <span class="icon">‚úàÔ∏è</span>
                    <span class="text">Telegram</span>
                </div>
            </div>
        </div>

        <!-- –°–¢–†–ê–ù–ò–¶–ê 3: –í–´–ë–û–† –û–†–ì–ê–ù–ò–ó–ê–¶–ò–ò -->
        <div id="pageOrganization" class="page">
            <div class="header">
                <h1>–í—ã–±–µ—Ä–∏—Ç–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—é</h1>
                <p>–ö –∫–æ—Ç–æ—Ä–æ–π –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –Ω–∞—Ä—É—à–∏–≤—à–∏–π</p>
            </div>
            
            <div class="step-info" id="step1Info">–®–∞–≥ 1 –∏–∑ 7</div>
            <div class="progress-bar"><div class="progress" id="progress1"></div></div>
            
            <div class="icon-grid">
                <div class="icon-button" onclick="selectOrganization('–ê–û ¬´–°–∞–º–∞—Ä–∞–Ω–µ—Ñ—Ç–µ–≥–∞–∑¬ª')">
                    <span class="icon">üè¢</span>
                    <span class="text">–ê–û ¬´–°–∞–º–∞—Ä–∞–Ω–µ—Ñ—Ç–µ–≥–∞–∑¬ª</span>
                </div>
                
                <div class="icon-button" onclick="selectOrganization('–ü–æ–¥—Ä—è–¥–Ω–∞—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è')">
                    <span class="icon">üë∑</span>
                    <span class="text">–ü–æ–¥—Ä—è–¥–Ω–∞—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è</span>
                </div>
            </div>
        </div>

        <!-- –°–¢–†–ê–ù–ò–¶–ê 4: –í–´–ë–û–† –ì–†–£–ü–ü–´ -->
        <div id="pageGroup" class="page">
            <div class="header">
                <h1>–í—ã–±–µ—Ä–∏—Ç–µ –≥—Ä—É–ø–ø—É</h1>
            </div>
            
            <div class="step-info" id="step2Info">–®–∞–≥ 2 –∏–∑ 7</div>
            <div class="progress-bar"><div class="progress" id="progress2"></div></div>
            
            <div class="icon-grid">
                <div class="icon-button" onclick="selectGroup('–Æ–∂–Ω–∞—è')">
                    <span class="icon">üß≠</span>
                    <span class="text">–Æ–∂–Ω–∞—è –≥—Ä—É–ø–ø–∞</span>
                </div>
                
                <div class="icon-button" onclick="selectGroup('–¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è')">
                    <span class="icon">üéØ</span>
                    <span class="text">–¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è –≥—Ä—É–ø–ø–∞</span>
                </div>
                
                <div class="icon-button" onclick="selectGroup('–°–µ–≤–µ—Ä–Ω–∞—è')">
                    <span class="icon">üßä</span>
                    <span class="text">–°–µ–≤–µ—Ä–Ω–∞—è –≥—Ä—É–ø–ø–∞</span>
                </div>
                
                <div class="icon-button" onclick="selectGroup('–û–î–¶')">
                    <span class="icon">üèõÔ∏è</span>
                    <span class="text">–û–î–¶</span>
                </div>
            </div>
        </div>

        <!-- –°–¢–†–ê–ù–ò–¶–ê 5: –í–´–ë–û–† –£–ü–†–ê–í–õ–ï–ù–ò–Ø -->
        <div id="pageManagement" class="page">
            <div class="header">
                <h1>–í—ã–±–µ—Ä–∏—Ç–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</h1>
            </div>
            
            <div class="step-info" id="step3Info">–®–∞–≥ 3 –∏–∑ 7</div>
            <div class="progress-bar"><div class="progress" id="progress3"></div></div>
            
            <div class="scroll-container">
                <div class="scroll-item" onclick="selectManagement('–£–î–ù–ì')">
                    <span class="icon">üõ¢Ô∏è</span>
                    <span class="text">–£–î–ù–ì</span>
                </div>
                
                <div class="scroll-item" onclick="selectManagement('–£–ü–ü–ù')">
                    <span class="icon">‚õΩ</span>
                    <span class="text">–£–ü–ü–ù</span>
                </div>
                
                <div class="scroll-item" onclick="selectManagement('–£–ü–ü–î')">
                    <span class="icon">üîß</span>
                    <span class="text">–£–ü–ü–î</span>
                </div>
                
                <div class="scroll-item" onclick="selectManagement('–£–ü–ö–ì')">
                    <span class="icon">üè≠</span>
                    <span class="text">–£–ü–ö–ì</span>
                </div>
                
                <div class="scroll-item" onclick="selectManagement('–£–≠–¢')">
                    <span class="icon">‚ö°</span>
                    <span class="text">–£–≠–¢</span>
                </div>
                
                <div class="scroll-item" onclick="selectManagement('–ü–°–ö')">
                    <span class="icon">üî®</span>
                    <span class="text">–ü–°–ö</span>
                </div>
                
                <div class="scroll-item" onclick="selectManagement('–£–ö–ö')">
                    <span class="icon">üß™</span>
                    <span class="text">–£–ö–ö</span>
                </div>
                
                <div class="scroll-item" onclick="selectManagement('–ë–ª–æ–∫ –≠–Ω–µ—Ä–≥–µ—Ç–∏–∫–∞')">
                    <span class="icon">üí°</span>
                    <span class="text">–≠–Ω–µ—Ä–≥–µ—Ç–∏–∫–∞</span>
                </div>
                
                <div class="scroll-item" onclick="selectManagement('–ù–µ—Ç –≤ —Å–ø–∏—Å–∫–µ')">
                    <span class="icon">‚ùì</span>
                    <span class="text">–ù–µ—Ç –≤ —Å–ø–∏—Å–∫–µ</span>
                </div>
                
                <div class="scroll-item" onclick="selectManagement('–ù–µ –∑–Ω–∞—é')">
                    <span class="icon">ü§∑</span>
                    <span class="text">–ù–µ –∑–Ω–∞—é</span>
                </div>
            </div>
        </div>

        <!-- –°–¢–†–ê–ù–ò–¶–ê 6: –í–´–ë–û–† –¶–ï–•–ê -->
        <div id="pageShop" class="page">
            <div class="header">
                <h1>–í—ã–±–µ—Ä–∏—Ç–µ —Ü–µ—Ö/—É—á–∞—Å—Ç–æ–∫</h1>
            </div>
            
            <div class="step-info" id="step4Info">–®–∞–≥ 4 –∏–∑ 7</div>
            <div class="progress-bar"><div class="progress" id="progress4"></div></div>
            
            <div id="shopContainer">
                <!-- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è —Ü–µ—Ö–∞–º–∏ -->
            </div>
        </div>

        <!-- –°–¢–†–ê–ù–ò–¶–ê 7: –û–ë–õ–ê–°–¢–¨ –ù–ê–†–£–®–ï–ù–ò–Ø -->
        <div id="pageArea" class="page">
            <div class="header">
                <h1>–û–±–ª–∞—Å—Ç—å –Ω–∞—Ä—É—à–µ–Ω–∏—è</h1>
            </div>
            
            <div class="step-info" id="step5Info">–®–∞–≥ 5 –∏–∑ 7</div>
            <div class="progress-bar"><div class="progress" id="progress5"></div></div>
            
            <div class="circle-grid">
                <div class="circle-button" onclick="selectArea('–°–ò–ó')">
                    <span class="icon">üõ°Ô∏è</span>
                    <span class="text">–°–ò–ó</span>
                </div>
                
                <div class="circle-button" onclick="selectArea('–ò–Ω—Å—Ç—Ä—É–∫—Ç–∞–∂')">
                    <span class="icon">üìã</span>
                    <span class="text">–ò–Ω—Å—Ç—Ä—É–∫—Ç–∞–∂</span>
                </div>
                
                <div class="circle-button" onclick="selectArea('–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å')">
                    <span class="icon">üöó</span>
                    <span class="text">–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç</span>
                </div>
                
                <div class="circle-button" onclick="selectArea('–†–∞–±–æ—Ç—ã –ø–æ–≤—ã—à–µ–Ω–Ω–æ–π –æ–ø–∞—Å–Ω–æ—Å—Ç–∏')">
                    <span class="icon">‚ö†Ô∏è</span>
                    <span class="text">–û–ø–∞—Å–Ω—ã–µ —Ä–∞–±–æ—Ç—ã</span>
                </div>
                
                <div class="circle-button" onclick="selectArea('–ü–æ–∂–∞—Ä–Ω–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å')">
                    <span class="icon">üî•</span>
                    <span class="text">–ü–æ–∂–∞—Ä–Ω–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å</span>
                </div>
                
                <div class="circle-button" onclick="selectArea('–ü–µ—Ä–µ–¥–≤–∏–∂–µ–Ω–∏–µ –ø–æ –ª–µ—Å—Ç–Ω–∏—Ü–µ')">
                    <span class="icon">üì∂</span>
                    <span class="text">–õ–µ—Å—Ç–Ω–∏—Ü—ã</span>
                </div>
                
                <div class="circle-button" onclick="selectArea('–≠–ª–µ–∫—Ç—Ä–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å')">
                    <span class="icon">‚ö°</span>
                    <span class="text">–≠–ª–µ–∫—Ç—Ä–∏—á–µ—Å—Ç–≤–æ</span>
                </div>
            </div>
        </div>

        <!-- –°–¢–†–ê–ù–ò–¶–ê 8: –ú–ï–°–¢–û –ù–ê–†–£–®–ï–ù–ò–Ø -->
        <div id="pagePlace" class="page">
            <div class="header">
                <h1>–ú–µ—Å—Ç–æ –Ω–∞—Ä—É—à–µ–Ω–∏—è</h1>
                <p>–£–∫–∞–∂–∏—Ç–µ –≥–¥–µ –ø—Ä–æ–∏–∑–æ—à–ª–æ –Ω–∞—Ä—É—à–µ–Ω–∏–µ</p>
            </div>
            
            <div class="step-info" id="step6Info">–®–∞–≥ 6 –∏–∑ 7</div>
            <div class="progress-bar"><div class="progress" id="progress6"></div></div>
            
            <div class="input-group">
                <label class="input-label">–û–±—ä–µ–∫—Ç/–º–µ—Å—Ç–æ –Ω–∞—Ä—É—à–µ–Ω–∏—è:</label>
                <textarea class="textarea-input" id="placeInput" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –£–ü–ù –ê–ª–∞–∫–∞–µ–≤—Å–∫–∞—è, –∑–¥–∞–Ω–∏–µ –æ–ø–µ—Ä–∞—Ç–æ—Ä–Ω–æ–π"></textarea>
            </div>
            
            <div class="nav-buttons">
                <button class="nav-button back" onclick="goToStep('pageArea')">–ù–∞–∑–∞–¥</button>
                <button class="nav-button next" onclick="goToStep('pageDescription')">–î–∞–ª–µ–µ</button>
            </div>
        </div>

        <!-- –°–¢–†–ê–ù–ò–¶–ê 9: –û–ü–ò–°–ê–ù–ò–ï –ù–ê–†–£–®–ï–ù–ò–Ø -->
        <div id="pageDescription" class="page">
            <div class="header">
                <h1>–û–ø–∏—Å–∞–Ω–∏–µ –Ω–∞—Ä—É—à–µ–Ω–∏—è</h1>
                <p>–ü–æ–¥—Ä–æ–±–Ω–æ –æ–ø–∏—à–∏—Ç–µ —á—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ</p>
            </div>
            
            <div class="step-info" id="step7Info">–®–∞–≥ 7 –∏–∑ 7</div>
            <div class="progress-bar"><div class="progress" id="progress7"></div></div>
            
            <div class="input-group">
                <label class="input-label">–ß—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ:</label>
                <textarea class="textarea-input" id="descInput" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –†–∞–±–æ—Ç–Ω–∏–∫ –ø–µ—Ä–µ–¥–≤–∏–≥–∞–ª—Å—è –ø–æ —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∏ –æ–±—ä–µ–∫—Ç–∞ –±–µ–∑ –∫–∞—Å–∫–∏"></textarea>
            </div>
            
            <div class="nav-buttons">
                <button class="nav-button back" onclick="goToStep('pagePlace')">–ù–∞–∑–∞–¥</button>
                <button class="nav-button send" onclick="sendMessage()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
            </div>
        </div>
    </div>

    <script>
        // –î–∞–Ω–Ω—ã–µ –¥–ª—è —Ü–µ—Ö–æ–≤
        const structures = {
            "–£–î–ù–ì": ["–¶–î–ù–ì-2","–¶–î–ù–ì-3","–¶–î–ù–ì-4","–¶–î–ù–ì-5","–¶–î–ù–ì-6","–¶–î–ù–ì-7","–¶–î–ù–ì-8"],
            "–£–ü–ü–ù": ["–¶–ü–ü–ù-1","–¶–ü–ü–ù-3","–¶–ü–ü–ù-4","–¶–ü–ü–ù-5","–¶–ü–ü–ù-6"],
            "–£–ü–ü–î": ["–¶–ü–ü–î-1","–¶–ü–ü–î-2","–¶–ü–ü–î-3"],
            "–£–ü–ö–ì": ["–£—á–∞—Å—Ç–æ–∫-1","–£—á–∞—Å—Ç–æ–∫-2","–£—á–∞—Å—Ç–æ–∫-3"],
            "–£–≠–¢": ["–¶–≠–†–¢-1","–¶–≠–†–¢-2","–¶–≠–†–¢-3","–¶–õ–ê–ü"],
            "–ü–°–ö": ["–ü–°–¶-1","–ü–°–¶-2"],
            "–£–ö–ö": ["–ò–•–ê–õ-1","–ò–•–ê–õ-2","–ò–•–ê–õ-3","–ò–•–ê–õ-4","–ò–•–ê–õ-5","–ò–•–ê–õ-6","–ò–•–ê–õ-7","–ò–•–ê–õ-8","–ò–•–ê–õ-9"],
            "–ë–ª–æ–∫ –≠–Ω–µ—Ä–≥–µ—Ç–∏–∫–∞": ["–°–†–≠","–¶–≠–û–¢-2","–¶–≠–û–¢-3","–¶–≠–≠-5","–¶–≠–≠-6"]
        };

        // –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–æ—Ä–º—ã
        let selectedType = "";
        let formData = {
            organization: "",
            group: "",
            management: "",
            shop: "",
            area: "",
            place: "",
            description: ""
        };

        // –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º
        function showPage(pageId) {
            document.querySelectorAll('.page').forEach(page => page.classList.remove('active'));
            document.getElementById(pageId).classList.add('active');
            window.scrollTo(0, 0);
        }

        function goToStep(pageId) {
            showPage(pageId);
            updateProgress();
        }

        function updateProgress() {
            const steps = {
                'pageOrganization': 1,
                'pageGroup': 2,
                'pageManagement': 3,
                'pageShop': 4,
                'pageArea': 5,
                'pagePlace': 6,
                'pageDescription': 7
            };
            
            const currentPage = document.querySelector('.page.active').id;
            const currentStep = steps[currentPage] || 0;
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –≤—Å–µ –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä—ã
            for (let i = 1; i <= 7; i++) {
                const progress = document.getElementById(`progress${i}`);
                const info = document.getElementById(`step${i}Info`);
                if (progress) {
                    progress.style.width = i <= currentStep ? '100%' : '0%';
                }
                if (info && i === currentStep) {
                    info.textContent = `–®–∞–≥ ${i} –∏–∑ 7`;
                }
            }
        }

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –≤—ã–±–æ—Ä–∞
        function startSteps(type) {
            selectedType = type;
            formData = {
                organization: "",
                group: "",
                management: "",
                shop: "",
                area: "",
                place: "",
                description: ""
            };
            goToStep('pageOrganization');
        }

        function selectOrganization(org) {
            formData.organization = org;
            if (org === '–ü–æ–¥—Ä—è–¥–Ω–∞—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è') {
                // –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –≤—ã–±–æ—Ä –≥—Ä—É–ø–ø—ã –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–ª—è –ø–æ–¥—Ä—è–¥–Ω—ã—Ö
                formData.group = "";
                formData.management = "";
                formData.shop = "";
                goToStep('pageArea');
            } else {
                goToStep('pageGroup');
            }
        }

        function selectGroup(group) {
            formData.group = group;
            if (group === '–û–î–¶') {
                // –î–ª—è –û–î–¶ –ø—Ä–æ–ø—É—Å–∫–∞–µ–º –≤—ã–±–æ—Ä —Ü–µ—Ö–∞
                formData.management = "–û–î–¶";
                formData.shop = "";
                goToStep('pageArea');
            } else {
                goToStep('pageManagement');
            }
        }

        function selectManagement(management) {
            formData.management = management;
            
            if (management === '–ù–µ—Ç –≤ —Å–ø–∏—Å–∫–µ' || management === '–ù–µ –∑–Ω–∞—é') {
                formData.shop = management;
                goToStep('pageArea');
            } else if (structures[management]) {
                showShops(structures[management]);
                goToStep('pageShop');
            } else {
                formData.shop = "";
                goToStep('pageArea');
            }
        }

        function showShops(shops) {
            const container = document.getElementById('shopContainer');
            container.innerHTML = '<div class="icon-grid"></div>';
            const grid = container.querySelector('.icon-grid');
            
            shops.forEach(shop => {
                const button = document.createElement('div');
                button.className = 'icon-button';
                button.onclick = () => {
                    formData.shop = shop;
                    goToStep('pageArea');
                };
                button.innerHTML = `
                    <span class="icon">üèóÔ∏è</span>
                    <span class="text">${shop}</span>
                `;
                grid.appendChild(button);
            });
        }

        function selectArea(area) {
            formData.area = area;
            goToStep('pagePlace');
        }

        // –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è
        function sendMessage() {
            formData.place = document.getElementById('placeInput').value.trim();
            formData.description = document.getElementById('descInput').value.trim();
            
            if (!formData.description) {
                alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ–ø–∏—à–∏—Ç–µ –Ω–∞—Ä—É—à–µ–Ω–∏–µ');
                return;
            }

            // –§–æ—Ä–º–∏—Ä—É–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ
            let message = `–°–æ–æ–±—â–µ–Ω–∏–µ –æ –Ω–∞—Ä—É—à–µ–Ω–∏–∏:\n\n`;
            message += `–û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è: ${formData.organization}\n`;
            
            if (formData.organization === '–ê–û ¬´–°–∞–º–∞—Ä–∞–Ω–µ—Ñ—Ç–µ–≥–∞–∑¬ª') {
                if (formData.group) message += `–ì—Ä—É–ø–ø–∞: ${formData.group}\n`;
                if (formData.management) message += `–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: ${formData.management}\n`;
                if (formData.shop) message += `–¶–µ—Ö/—É—á–∞—Å—Ç–æ–∫: ${formData.shop}\n`;
            } else {
                // –î–ª—è –ø–æ–¥—Ä—è–¥–Ω—ã—Ö –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π
                if (formData.management) message += `–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: ${formData.management}\n`;
            }
            
            message += `–û–±–ª–∞—Å—Ç—å –Ω–∞—Ä—É—à–µ–Ω–∏—è: ${formData.area}\n`;
            if (formData.place) message += `–ú–µ—Å—Ç–æ: ${formData.place}\n`;
            message += `\n–û–ø–∏—Å–∞–Ω–∏–µ:\n${formData.description}`;

            // –û—Ç–ø—Ä–∞–≤–∫–∞
            if (selectedType === 'wa') {
                window.open(`https://wa.me/79371809021?text=${encodeURIComponent(message)}`, '_blank');
            } else if (selectedType === 'tg') {
                window.open(`https://t.me/+79371809021?text=${encodeURIComponent(message)}`, '_blank');
            } else if (selectedType === 'sms') {
                window.location.href = `sms:+79371809021?body=${encodeURIComponent(message)}`;
            }
            
            alert('–°–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–æ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏!');
            showPage('pageWelcome');
        }

        // –ü—Ä–æ—Å—Ç—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
        function makeCall() {
            window.open('tel:+79371809021');
        }

        // PWA —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
        let deferredPrompt;
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            setTimeout(() => {
                if (deferredPrompt) document.getElementById('installPrompt').style.display = 'block';
            }, 3000);
        });

        function installApp() {
            if (deferredPrompt) {
                deferredPrompt.prompt();
                deferredPrompt.userChoice.then(() => {
                    deferredPrompt = null;
                    document.getElementById('installPrompt').style.display = 'none';
                });
            }
        }

        function dismissPrompt() {
            document.getElementById('installPrompt').style.display = 'none';
        }

        if ('serviceWorker' in navigator) {
            window.addEventListener('load', function() {
                navigator.serviceWorker.register('/pbotos-app/sw.js')
                    .catch(error => console.log('SW error:', error));
            });
        }
    </script>
</body>
</html>
