<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü–ë–û–¢–û–° - –°–æ–æ–±—â–∏—Ç—å –æ –Ω–∞—Ä—É—à–µ–Ω–∏–∏</title>
    
    <!-- PWA –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ -->
    <meta name="theme-color" content="#121212">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="–ü–ë–û–¢–û–°">
    <link rel="manifest" href="manifest.json">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: Arial, sans-serif;
            background: #121212;
            color: white;
            min-height: 100vh;
            padding: 20px 20px 80px 20px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            padding: 30px 20px;
            background: linear-gradient(135deg, #1a1a1a, #2a2a2a);
            border-radius: 20px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        .header h1 {
            font-size: 2.2rem;
            margin-bottom: 10px;
            color: #ffd200;
            text-shadow: 0 2px 10px rgba(255, 210, 0, 0.3);
        }

        .header p {
            color: #ccc;
            font-size: 1.1rem;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü */
        .page {
            display: none;
            animation: fadeIn 0.3s ease-in-out;
        }

        .page.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* –°—Ç–∏–ª–∏ –∫–∞—Ä—Ç–æ—á–µ–∫ */
        .cards-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .card {
            background: linear-gradient(135deg, #2a2a2a, #1a1a1a);
            border-radius: 20px;
            padding: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 1px solid #333;
            box-shadow: 0 8px 25px rgba(0,0,0,0.2);
            position: relative;
            overflow: hidden;
        }

        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #ffd200, #007bff);
        }

        .card:hover {
            transform: translateY(-8px);
            box-shadow: 0 15px 40px rgba(0,0,0,0.4);
            border-color: #ffd200;
        }

        .card-content {
            display: flex;
            align-items: flex-start;
            gap: 20px;
        }

        .card-icon {
            width: 70px;
            height: 70px;
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            flex-shrink: 0;
            transition: all 0.3s ease;
        }

        .card:hover .card-icon {
            transform: scale(1.1);
        }

        .card-text {
            flex: 1;
        }

        .card-title {
            font-size: 1.3rem;
            font-weight: bold;
            margin-bottom: 8px;
            color: white;
        }

        .card-description {
            color: #aaa;
            font-size: 0.9rem;
            line-height: 1.4;
        }

        .card-badge {
            position: absolute;
            top: 15px;
            right: 15px;
            background: #007bff;
            color: white;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.7rem;
            font-weight: bold;
        }

        /* –¶–≤–µ—Ç–∞ –∏–∫–æ–Ω–æ–∫ */
        .icon-call { background: linear-gradient(135deg, #28a745, #20c997); }
        .icon-sms { background: linear-gradient(135deg, #17a2b8, #6f42c1); }
        .icon-wa { background: linear-gradient(135deg, #25d366, #128c7e); }
        .icon-tg { background: linear-gradient(135deg, #0088cc, #005999); }
        .icon-rules { background: linear-gradient(135deg, #ffc107, #fd7e14); }
        .icon-firstaid { background: linear-gradient(135deg, #dc3545, #e83e8c); }

        /* –ù–ò–ñ–ù–ò–ô –¢–£–õ–ë–ê–† */
        .bottom-toolbar {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: #1a1a1a;
            border-top: 2px solid #333;
            padding: 12px 20px;
            display: flex;
            justify-content: space-around;
            align-items: center;
            z-index: 1000;
            backdrop-filter: blur(10px);
        }

        .toolbar-button {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 6px;
            background: none;
            border: none;
            color: #888;
            cursor: pointer;
            padding: 8px 16px;
            border-radius: 12px;
            transition: all 0.3s ease;
            flex: 1;
            max-width: 120px;
        }

        .toolbar-button.active {
            color: #ffd200;
            background: rgba(255, 210, 0, 0.1);
        }

        .toolbar-button:hover {
            color: #ffd200;
            background: rgba(255, 210, 0, 0.05);
        }

        .toolbar-icon {
            font-size: 1.5rem;
            transition: all 0.3s ease;
        }

        .toolbar-button.active .toolbar-icon {
            transform: scale(1.1);
        }

        .toolbar-label {
            font-size: 0.8rem;
            font-weight: 500;
        }

        /* –§–û–†–ú–ê –° –®–ê–ì–ê–ú–ò */
        .form-container {
            display: none;
            background: white;
            color: #333;
            padding: 25px;
            border-radius: 20px;
            margin-top: 20px;
            box-shadow: 0 15px 40px rgba(0,0,0,0.2);
        }

        .step {
            display: none;
            margin-bottom: 25px;
            padding: 25px;
            background: #f8f9fa;
            border-radius: 15px;
            border-left: 5px solid #007bff;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .step.active {
            display: block;
            animation: slideIn 0.3s ease-out;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateX(20px); }
            to { opacity: 1; transform: translateX(0); }
        }

        .step-label {
            font-weight: bold;
            display: block;
            margin-bottom: 12px;
            color: #333;
            font-size: 1.1rem;
        }

        .step-select, .step-input, .step-textarea {
            width: 100%;
            padding: 15px;
            margin: 10px 0 20px;
            border-radius: 12px;
            border: 2px solid #e9ecef;
            font-size: 16px;
            transition: all 0.3s;
            box-sizing: border-box;
            min-height: 50px;
            resize: vertical;
            background: white;
        }

        .step-select:focus, .step-input:focus, .step-textarea:focus {
            border-color: #ffd200;
            outline: none;
            box-shadow: 0 0 0 3px rgba(255, 210, 0, 0.1);
        }

        .step-button {
            padding: 16px 32px;
            border: none;
            border-radius: 12px;
            background: linear-gradient(135deg, #007bff, #0056b3);
            color: white;
            cursor: pointer;
            font-weight: bold;
            font-size: 16px;
            transition: all 0.3s;
            box-sizing: border-box;
            margin-top: 10px;
        }

        .step-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0,123,255,0.3);
        }

        .step-button.back {
            background: linear-gradient(135deg, #6c757d, #495057);
            margin-right: 10px;
            width: auto;
            flex: 1;
        }

        .step-button.next {
            background: linear-gradient(135deg, #28a745, #20c997);
            width: auto;
            flex: 2;
        }

        .step-button.send {
            background: linear-gradient(135deg, #dc3545, #c82333);
        }

        .button-group {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        .group-checkbox {
            display: flex;
            flex-direction: column;
            gap: 12px;
            width: 100%;
        }

        .checkbox-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 18px 20px;
            background: white;
            border-radius: 12px;
            border: 2px solid #e9ecef;
            cursor: pointer;
            font-weight: normal;
            transition: all 0.3s;
            width: 100%;
            box-sizing: border-box;
        }

        .checkbox-item:hover {
            border-color: #007bff;
            background: #f8f9ff;
        }

        .checkbox-item input[type="radio"] {
            width: 20px;
            height: 20px;
            margin: 0;
            cursor: pointer;
            flex-shrink: 0;
        }

        .back-button {
            margin: 25px auto;
            background: linear-gradient(135deg, #6c757d, #495057);
            color: white;
            border: none;
            padding: 16px 32px;
            border-radius: 12px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            width: 100%;
            transition: all 0.3s;
            box-sizing: border-box;
            display: none;
        }

        .back-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(108,117,125,0.3);
        }

        .install-prompt {
            position: fixed;
            bottom: 80px;
            left: 50%;
            transform: translateX(-50%);
            background: white;
            color: black;
            padding: 20px 25px;
            border-radius: 15px;
            box-shadow: 0 10px 35px rgba(0,0,0,0.3);
            display: none;
            z-index: 1001;
            max-width: 400px;
            text-align: center;
            border: 2px solid #ffd200;
        }

        .install-prompt button {
            background: #007bff;
            color: white;
            border: none;
            padding: 12px 24px;
            margin: 8px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: bold;
            transition: all 0.3s;
        }

        .install-prompt button:hover {
            transform: translateY(-2px);
        }

        .install-prompt button:last-child {
            background: #6c757d;
        }

        .instructions {
            background: linear-gradient(135deg, #1a1a1a, #2a2a2a);
            padding: 25px;
            border-radius: 15px;
            margin-top: 30px;
            font-size: 14px;
            line-height: 1.6;
            border: 1px solid #333;
        }

        .instructions h3 {
            color: #ffd200;
            margin-bottom: 15px;
            font-size: 1.2rem;
        }

        .instructions p {
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .progress-bar {
            display: none;
            width: 100%;
            height: 8px;
            background: #e9ecef;
            border-radius: 4px;
            margin-bottom: 25px;
            overflow: hidden;
        }

        .progress {
            height: 100%;
            background: linear-gradient(90deg, #007bff, #00b3ff);
            width: 0%;
            transition: width 0.4s ease;
            border-radius: 4px;
        }

        .step-indicator {
            text-align: center;
            margin-bottom: 20px;
            color: #666;
            font-size: 0.9rem;
        }

        /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
        @media (max-width: 768px) {
            .cards-grid {
                grid-template-columns: 1fr;
                gap: 15px;
            }
            
            .card {
                padding: 20px;
            }
            
            .card-content {
                gap: 15px;
            }
            
            .card-icon {
                width: 60px;
                height: 60px;
                font-size: 1.7rem;
            }

            .bottom-toolbar {
                padding: 10px 15px;
            }

            .toolbar-button {
                padding: 6px 12px;
            }

            .toolbar-icon {
                font-size: 1.3rem;
            }

            .toolbar-label {
                font-size: 0.75rem;
            }

            .button-group {
                flex-direction: column;
            }

            .step-button.back,
            .step-button.next {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <!-- –û–∫–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è -->
    <div class="install-prompt" id="installPrompt">
        <p><strong>üéØ –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ü–ë–û–¢–û–°</strong></p>
        <p>–î–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ —Å –¥–æ–º–∞—à–Ω–µ–≥–æ —ç–∫—Ä–∞–Ω–∞</p>
        <button onclick="installApp()">‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å</button>
        <button onclick="dismissPrompt()">‚ùå –ü–æ–∑–∂–µ</button>
    </div>

    <div class="container">
        <div class="header">
            <h1>üö® –ü–ë–û–¢–û–°</h1>
            <p>–°–∏—Å—Ç–µ–º–∞ –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è –æ –Ω–∞—Ä—É—à–µ–Ω–∏—è—Ö –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏</p>
        </div>

        <!-- –°–¢–†–ê–ù–ò–¶–ê 1: –°–æ–æ–±—â–µ–Ω–∏—è -->
        <div id="pageMessages" class="page active">
            <div class="cards-grid">
                <!-- –ó–≤–æ–Ω–æ–∫ -->
                <div class="card" onclick="makeCall()">
                    <div class="card-content">
                        <div class="card-icon icon-call">üìû</div>
                        <div class="card-text">
                            <div class="card-title">–ü–æ–∑–≤–æ–Ω–∏—Ç—å –¥–µ–∂—É—Ä–Ω–æ–º—É</div>
                            <div class="card-description">–ù–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–∞—è —Å–≤—è–∑—å —Å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–º –ü–ë–û–¢–û–° –ø–æ –Ω–æ–º–µ—Ä—É +7 (937) 180-90-21</div>
                        </div>
                    </div>
                    <div class="card-badge">–ë–´–°–¢–†–´–ô –í–´–ó–û–í</div>
                </div>

                <!-- SMS -->
                <div class="card" onclick="startSteps('sms')">
                    <div class="card-content">
                        <div class="card-icon icon-sms">üí¨</div>
                        <div class="card-text">
                            <div class="card-title">SMS —Å–æ–æ–±—â–µ–Ω–∏–µ</div>
                            <div class="card-description">–ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É –∏ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ —Ç–µ–∫—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –¥–µ–∂—É—Ä–Ω–æ–º—É —Å–æ—Ç—Ä—É–¥–Ω–∏–∫—É</div>
                        </div>
                    </div>
                    <div class="card-badge">–§–û–†–ú–ê</div>
                </div>

                <!-- WhatsApp -->
                <div class="card" onclick="startSteps('wa')">
                    <div class="card-content">
                        <div class="card-icon icon-wa">üíö</div>
                        <div class="card-text">
                            <div class="card-title">WhatsApp</div>
                            <div class="card-description">–û—Ç–ø—Ä–∞–≤—å—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä WhatsApp —Å –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω–æ–π —Ñ–æ—Ä–º–æ–π</div>
                        </div>
                    </div>
                    <div class="card-badge">–ú–ï–°–°–ï–ù–î–ñ–ï–†</div>
                </div>

                <!-- Telegram -->
                <div class="card" onclick="startSteps('tg')">
                    <div class="card-content">
                        <div class="card-icon icon-tg">‚úàÔ∏è</div>
                        <div class="card-text">
                            <div class="card-title">Telegram</div>
                            <div class="card-description">–ù–∞–ø–∏—à–∏—Ç–µ –≤ Telegram —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω–æ–π —Ñ–æ—Ä–º–æ–π –Ω–∞—Ä—É—à–µ–Ω–∏—è</div>
                        </div>
                    </div>
                    <div class="card-badge">–ú–ï–°–°–ï–ù–î–ñ–ï–†</div>
                </div>
            </div>

            <div class="instructions">
                <h3>üì± –ö–∞–∫ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ:</h3>
                <p><strong>Android (Chrome):</strong> –ú–µ–Ω—é ‚Üí "–î–æ–±–∞–≤–∏—Ç—å –Ω–∞ –≥–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω"</p>
                <p><strong>iPhone (Safari):</strong> –ü–æ–¥–µ–ª–∏—Ç—å—Å—è ‚Üí "–ù–∞ —ç–∫—Ä–∞–Ω ¬´–î–æ–º–æ–π¬ª"</p>
                <p><strong>–ö–æ–º–ø—å—é—Ç–µ—Ä:</strong> –í –∞–¥—Ä–µ—Å–Ω–æ–π —Å—Ç—Ä–æ–∫–µ –Ω–∞–∂–º–∏—Ç–µ –∑–Ω–∞—á–æ–∫ üì•</p>
            </div>
        </div>

        <!-- –°–¢–†–ê–ù–ò–¶–ê 2: –ü–∞–º—è—Ç–∫–∏ -->
        <div id="pageReferences" class="page">
            <div class="cards-grid">
                <!-- –ó–æ–ª–æ—Ç—ã–µ –ø—Ä–∞–≤–∏–ª–∞ -->
                <div class="card" onclick="openRules()">
                    <div class="card-content">
                        <div class="card-icon icon-rules">üìö</div>
                        <div class="card-text">
                            <div class="card-title">–ó–æ–ª–æ—Ç—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏</div>
                            <div class="card-description">–û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –ø—Ä–æ–º—ã—à–ª–µ–Ω–Ω–æ–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏. –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã –∫ –∏–∑—É—á–µ–Ω–∏—é</div>
                        </div>
                    </div>
                    <div class="card-badge">–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û</div>
                </div>

                <!-- –ü–µ—Ä–≤–∞—è –ø–æ–º–æ—â—å -->
                <div class="card" onclick="openFirstAid()">
                    <div class="card-content">
                        <div class="card-icon icon-firstaid">üè•</div>
                        <div class="card-text">
                            <div class="card-title">–ü–µ—Ä–≤–∞—è –ø–æ–º–æ—â—å</div>
                            <div class="card-description">–ê–ª–≥–æ—Ä–∏—Ç–º—ã –¥–µ–π—Å—Ç–≤–∏–π –ø—Ä–∏ –Ω–µ—Å—á–∞—Å—Ç–Ω—ã—Ö —Å–ª—É—á–∞—è—Ö. –ú–µ–¥–∏—Ü–∏–Ω—Å–∫–∞—è –ø–æ–º–æ—â—å –¥–æ –ø—Ä–∏–µ–∑–¥–∞ –≤—Ä–∞—á–µ–π</div>
                        </div>
                    </div>
                    <div class="card-badge">–≠–ö–°–¢–†–ï–ù–ù–û</div>
                </div>
            </div>

            <div class="instructions">
                <h3>üìñ –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã:</h3>
                <p>–í—Å–µ –ø–∞–º—è—Ç–∫–∏ —Å–æ–¥–µ—Ä–∂–∞—Ç –∞–∫—Ç—É–∞–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é —Å–æ–≥–ª–∞—Å–Ω–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º –ü–ë–û–¢–û–°</p>
                <p>–†–µ–≥—É–ª—è—Ä–Ω–æ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏ –≤ –∑–∞–∫–æ–Ω–æ–¥–∞—Ç–µ–ª—å—Å—Ç–≤–µ</p>
            </div>
        </div>

        <!-- –§–û–†–ú–ê –° –®–ê–ì–ê–ú–ò -->
        <div class="form-container" id="stepsContainer">
            <div class="progress-bar" id="progressBar">
                <div class="progress" id="progress"></div>
            </div>

            <!-- –®–∞–≥ 1: –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è -->
            <div id="step1" class="step active">
                <div class="step-indicator">–®–∞–≥ 1 –∏–∑ 8</div>
                <label class="step-label">–í—ã–±–µ—Ä–∏—Ç–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—é, –∫ –∫–æ—Ç–æ—Ä–æ–π –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –Ω–∞—Ä—É—à–∏–≤—à–∏–π:</label>
                <div class="group-checkbox">
                    <label class="checkbox-item">
                        –ê–û ¬´–°–∞–º–∞—Ä–∞–Ω–µ—Ñ—Ç–µ–≥–∞–∑¬ª
                        <input type="radio" name="organization" value="–ê–û ¬´–°–∞–º–∞—Ä–∞–Ω–µ—Ñ—Ç–µ–≥–∞–∑¬ª" onchange="handleOrganizationSelect(this.value)">
                    </label>
                    <label class="checkbox-item">
                        –ü–æ–¥—Ä—è–¥–Ω–∞—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è
                        <input type="radio" name="organization" value="–ü–æ–¥—Ä—è–¥–Ω–∞—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è" onchange="handleOrganizationSelect(this.value)">
                    </label>
                </div>
            </div>

            <!-- –®–∞–≥ 2: –ì—Ä—É–ø–ø–∞ (—Ç–æ–ª—å–∫–æ –¥–ª—è –ê–û –°–∞–º–∞—Ä–∞–Ω–µ—Ñ—Ç–µ–≥–∞–∑) -->
            <div id="step2" class="step">
                <div class="step-indicator">–®–∞–≥ 2 –∏–∑ 8</div>
                <label class="step-label">–í—ã–±–µ—Ä–∏—Ç–µ –≥—Ä—É–ø–ø—É:</label>
                <div class="group-checkbox">
                    <label class="checkbox-item">
                        –Æ–∂–Ω–∞—è –≥—Ä—É–ø–ø–∞
                        <input type="radio" name="group" value="–Æ–∂–Ω–∞—è" onchange="handleGroupSelect(this.value)">
                    </label>
                    <label class="checkbox-item">
                        –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è –≥—Ä—É–ø–ø–∞
                        <input type="radio" name="group" value="–¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è" onchange="handleGroupSelect(this.value)">
                    </label>
                    <label class="checkbox-item">
                        –°–µ–≤–µ—Ä–Ω–∞—è –≥—Ä—É–ø–ø–∞
                        <input type="radio" name="group" value="–°–µ–≤–µ—Ä–Ω–∞—è" onchange="handleGroupSelect(this.value)">
                    </label>
                    <label class="checkbox-item">
                        –û–î–¶
                        <input type="radio" name="group" value="–û–î–¶" onchange="handleGroupSelect(this.value)">
                    </label>
                </div>
                <div class="button-group">
                    <button class="step-button back" onclick="goToStep(1)">‚Üê –ù–∞–∑–∞–¥</button>
                </div>
            </div>

            <!-- –®–∞–≥ 3: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ -->
            <div id="step3" class="step">
                <div class="step-indicator">–®–∞–≥ 3 –∏–∑ 8</div>
                <label class="step-label">–í—ã–±–µ—Ä–∏—Ç–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:</label>
                <select class="step-select" id="managementSelect" onchange="handleManagementChange()">
                    <option value="">-- –≤—ã–±—Ä–∞—Ç—å --</option>
                    <option value="–ù–µ—Ç –≤ —Å–ø–∏—Å–∫–µ">–ù–µ—Ç –≤ —Å–ø–∏—Å–∫–µ</option>
                    <option value="–ù–µ –∑–Ω–∞—é">–ù–µ –∑–Ω–∞—é</option>
                    <option value="–£–î–ù–ì">–£–î–ù–ì</option>
                    <option value="–£–ü–ü–ù">–£–ü–ü–ù</option>
                    <option value="–£–ü–ü–î">–£–ü–ü–î</option>
                    <option value="–£–ü–ö–ì">–£–ü–ö–ì</option>
                    <option value="–£–≠–¢">–£–≠–¢</option>
                    <option value="–ü–°–ö">–ü–°–ö</option>
                    <option value="–£–ö–ö">–£–ö–ö</option>
                    <option value="–ë–ª–æ–∫ –≠–Ω–µ—Ä–≥–µ—Ç–∏–∫–∞">–ë–ª–æ–∫ –≠–Ω–µ—Ä–≥–µ—Ç–∏–∫–∞</option>
                </select>
                <div class="button-group">
                    <button class="step-button back" onclick="goToStep(2)">‚Üê –ù–∞–∑–∞–¥</button>
                    <button class="step-button next" onclick="nextFromStep3()">–î–∞–ª–µ–µ ‚Üí</button>
                </div>
            </div>

            <!-- –®–∞–≥ 4: –ü–æ–¥—Ä—è–¥–Ω–∞—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è -->
            <div id="step4" class="step">
                <div class="step-indicator">–®–∞–≥ 2 –∏–∑ 8</div>
                <label class="step-label">–£–∫–∞–∂–∏—Ç–µ –Ω–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ –ø–æ–¥—Ä—è–¥–Ω–æ–π –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏:</label>
                <input type="text" class="step-input" id="contractorInput" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –û–û–û –í–æ—Å—Ç–æ–∫">
                <div class="button-group">
                    <button class="step-button back" onclick="goToStep(1)">‚Üê –ù–∞–∑–∞–¥</button>
                    <button class="step-button next" onclick="nextFromStep4()">–î–∞–ª–µ–µ ‚Üí</button>
                </div>
            </div>

            <!-- –®–∞–≥ 5: –¶–µ—Ö/–£—á–∞—Å—Ç–æ–∫ -->
            <div id="step5" class="step">
                <div class="step-indicator" id="step5Indicator">–®–∞–≥ 4 –∏–∑ 8</div>
                <label class="step-label">–í—ã–±–µ—Ä–∏—Ç–µ –∏–ª–∏ –≤–≤–µ–¥–∏—Ç–µ —Ü–µ—Ö / —É—á–∞—Å—Ç–æ–∫ / –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—é:</label>
                <select class="step-select" id="shopSelect" style="display:none;">
                    <option value="">-- –≤—ã–±—Ä–∞—Ç—å --</option>
                </select>
                <input type="text" class="step-input" id="shopInput" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤—Ä—É—á–Ω—É—é">
                <div class="button-group">
                    <button class="step-button back" id="step5BackButton" onclick="goToStep(3)">‚Üê –ù–∞–∑–∞–¥</button>
                    <button class="step-button next" onclick="nextFromStep5()">–î–∞–ª–µ–µ ‚Üí</button>
                </div>
            </div>

            <!-- –®–∞–≥ 6: –û–±–ª–∞—Å—Ç—å –Ω–∞—Ä—É—à–µ–Ω–∏—è -->
            <div id="step6" class="step">
                <div class="step-indicator" id="step6Indicator">–®–∞–≥ 5 –∏–∑ 8</div>
                <label class="step-label">–û–±–ª–∞—Å—Ç—å –Ω–∞—Ä—É—à–µ–Ω–∏—è:</label>
                <select class="step-select" id="areaSelect" onchange="handleAreaChange()">
                    <option value="">-- –≤—ã–±—Ä–∞—Ç—å --</option>
                    <option value="–°–ò–ó">–°–ò–ó</option>
                    <option value="–ò–Ω—Å—Ç—Ä—É–∫—Ç–∞–∂">–ò–Ω—Å—Ç—Ä—É–∫—Ç–∞–∂</option>
                    <option value="–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å">–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å</option>
                    <option value="–†–∞–±–æ—Ç—ã –ø–æ–≤—ã—à–µ–Ω–Ω–æ–π –æ–ø–∞—Å–Ω–æ—Å—Ç–∏">–†–∞–±–æ—Ç—ã –ø–æ–≤—ã—à–µ–Ω–Ω–æ–π –æ–ø–∞—Å–Ω–æ—Å—Ç–∏</option>
                    <option value="–ü–æ–∂–∞—Ä–Ω–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å">–ü–æ–∂–∞—Ä–Ω–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å</option>
                    <option value="–ü–µ—Ä–µ–¥–≤–∏–∂–µ–Ω–∏–µ –ø–æ –ª–µ—Å—Ç–Ω–∏—Ü–µ">–ü–µ—Ä–µ–¥–≤–∏–∂–µ–Ω–∏–µ –ø–æ –ª–µ—Å—Ç–Ω–∏—Ü–µ</option>
                    <option value="–≠–ª–µ–∫—Ç—Ä–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å">–≠–ª–µ–∫—Ç—Ä–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å</option>
                </select>
                <div class="button-group">
                    <button class="step-button back" onclick="goToStep(5)">‚Üê –ù–∞–∑–∞–¥</button>
                    <button class="step-button next" onclick="nextFromStep6()">–î–∞–ª–µ–µ ‚Üí</button>
                </div>
            </div>

            <!-- –®–∞–≥ 7: –ú–µ—Å—Ç–æ –Ω–∞—Ä—É—à–µ–Ω–∏—è -->
            <div id="step7" class="step">
                <div class="step-indicator" id="step7Indicator">–®–∞–≥ 6 –∏–∑ 8</div>
                <label class="step-label" id="placeLabel">–û–±—ä–µ–∫—Ç/–º–µ—Å—Ç–æ –Ω–∞—Ä—É—à–µ–Ω–∏—è:</label>
                <textarea class="step-textarea" id="placeInput" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –£–ü–ù –ê–ª–∞–∫–∞–µ–≤—Å–∫–∞—è, –∑–¥–∞–Ω–∏–µ –æ–ø–µ—Ä–∞—Ç–æ—Ä–Ω–æ–π" rows="2"></textarea>
                <div id="transportExtra" style="display:none; margin-top: 20px;">
                    <label class="step-label">–ú–∞—Ä–∫–∞ –∏–ª–∏ –≥–æ—Å.–Ω–æ–º–µ—Ä —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω–æ–≥–æ —Å—Ä–µ–¥—Å—Ç–≤–∞:</label>
                    <textarea class="step-textarea" id="transportInput" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ü–ê–ó, –í187–í–ï763" rows="2"></textarea>
                </div>
                <div class="button-group">
                    <button class="step-button back" onclick="goToStep(6)">‚Üê –ù–∞–∑–∞–¥</button>
                    <button class="step-button next" onclick="nextFromStep7()">–î–∞–ª–µ–µ ‚Üí</button>
                </div>
            </div>

            <!-- –®–∞–≥ 8: –û–ø–∏—Å–∞–Ω–∏–µ –Ω–∞—Ä—É—à–µ–Ω–∏—è -->
            <div id="step8" class="step">
                <div class="step-indicator" id="step8Indicator">–®–∞–≥ 7 –∏–∑ 8</div>
                <label class="step-label">–û–ø–∏—Å–∞–Ω–∏–µ –Ω–∞—Ä—É—à–µ–Ω–∏—è:</label>
                <textarea class="step-textarea" id="descInput" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –†–∞–±–æ—Ç–Ω–∏–∫ (–§.–ò.–û. –µ—Å–ª–∏ –∑–Ω–∞–µ—Ç–µ) –ø–µ—Ä–µ–¥–≤–∏–≥–∞–ª—Å—è –ø–æ —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∏ –æ–±—ä–µ–∫—Ç–∞ –±–µ–∑ –∫–∞—Å–∫–∏" rows="4"></textarea>
                <div class="button-group">
                    <button class="step-button back" onclick="goToStep(7)">‚Üê –ù–∞–∑–∞–¥</button>
                    <button class="step-button send" onclick="sendMessage()">üì§ –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ</button>
                </div>
            </div>

            <button class="back-button" id="cancelButton" onclick="cancelSteps()">‚Üê –ù–∞–∑–∞–¥ –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é</button>
        </div>
    </div>

    <!-- –ù–ò–ñ–ù–ò–ô –¢–£–õ–ë–ê–† -->
    <div class="bottom-toolbar">
        <button class="toolbar-button active" onclick="showPage('pageMessages')">
            <span class="toolbar-icon">üí¨</span>
            <span class="toolbar-label">–°–æ–æ–±—â–µ–Ω–∏—è</span>
        </button>
        
        <button class="toolbar-button" onclick="showPage('pageReferences')">
            <span class="toolbar-icon">üìö</span>
            <span class="toolbar-label">–ü–∞–º—è—Ç–∫–∏</span>
        </button>
    </div>

    <script>
        // –°—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö
        const structures = {
            "–£–î–ù–ì": ["–¶–î–ù–ì-2","–¶–î–ù–ì-3","–¶–î–ù–ì-4","–¶–î–ù–ì-5","–¶–î–ù–ì-6","–¶–î–ù–ì-7","–¶–î–ù–ì-8"],
            "–£–ü–ü–ù": ["–¶–ü–ü–ù-1","–¶–ü–ü–ù-3","–¶–ü–ü–ù-4","–¶–ü–ü–ù-5","–¶–ü–ü–ù-6"],
            "–£–ü–ü–î": ["–¶–ü–ü–î-1","–¶–ü–ü–î-2","–¶–ü–ü–î-3"],
            "–£–ü–ö–ì": ["–£—á–∞—Å—Ç–æ–∫-1","–£—á–∞—Å—Ç–æ–∫-2","–£—á–∞—Å—Ç–æ–∫-3"],
            "–£–≠–¢": ["–¶–≠–†–¢-1","–¶–≠–†–¢-2","–¶–≠–†–¢-3","–¶–õ–ê–ü"],
            "–ü–°–ö": ["–ü–°–¶-1","–ü–°–¶-2"],
            "–£–ö–ö": ["–ò–•–ê–õ-1","–ò–•–ê–õ-2","–ò–•–ê–õ-3","–ò–•–ê–õ-4","–ò–•–ê–õ-5","–ò–•–ê–õ-6","–ò–•–ê–õ-7","–ò–•–ê–õ-8","–ò–•–ê–õ-9"],
            "–ë–ª–æ–∫ –≠–Ω–µ—Ä–≥–µ—Ç–∏–∫–∞": ["–°–†–≠","–¶–≠–û–¢-2","–¶–≠–û–¢-3","–¶–≠–≠-5","–¶–≠–≠-6"]
        };

        let selectedType = "";
        let currentStep = 1;
        let selectedOrganization = "";
        let selectedGroup = "";

        // –ù–∞–≤–∏–≥–∞—Ü–∏—è –º–µ–∂–¥—É —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º–∏ - –ò–°–ü–†–ê–í–õ–ï–ù–ù–ê–Ø –§–£–ù–ö–¶–ò–Ø
        function showPage(pageId) {
            // –°–∫—Ä—ã–≤–∞–µ–º —Ñ–æ—Ä–º—É —Å —à–∞–≥–∞–º–∏ –µ—Å–ª–∏ –æ–Ω–∞ –æ—Ç–∫—Ä—ã—Ç–∞
            if (document.getElementById('stepsContainer').style.display === 'block') {
                document.getElementById('stepsContainer').style.display = 'none';
                document.getElementById('progressBar').style.display = 'none';
                document.getElementById('cancelButton').style.display = 'none';
            }
            
            // –°–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≤—ã–±—Ä–∞–Ω–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
            document.getElementById(pageId).classList.add('active');
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—É—é –∫–Ω–æ–ø–∫—É –≤ —Ç—É–ª–±–∞—Ä–µ
            document.querySelectorAll('.toolbar-button').forEach(btn => {
                btn.classList.remove('active');
            });
            
            if (pageId === 'pageMessages') {
                document.querySelector('.toolbar-button:nth-child(1)').classList.add('active');
            } else if (pageId === 'pageReferences') {
                document.querySelector('.toolbar-button:nth-child(2)').classList.add('active');
            }
        }

        // –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ —à–∞–≥–∞–º —Ñ–æ—Ä–º—ã
        function goToStep(stepNumber) {
            // –°–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ —à–∞–≥–∏
            document.querySelectorAll('.step').forEach(step => {
                step.classList.remove('active');
            });
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≤—ã–±—Ä–∞–Ω–Ω—ã–π —à–∞–≥
            document.getElementById(`step${stepNumber}`).classList.add('active');
            currentStep = stepNumber;
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä
            updateProgress((stepNumber / 8) * 100);
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã —à–∞–≥–æ–≤
            updateStepIndicators();
            
            // –ü—Ä–æ–∫—Ä—É—á–∏–≤–∞–µ–º –∫ –≤–µ—Ä—Ö—É
            window.scrollTo(0, 0);
        }

        function updateStepIndicators() {
            // –û–±–Ω–æ–≤–ª—è–µ–º –Ω–æ–º–µ—Ä–∞ —à–∞–≥–æ–≤ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –ø—É—Ç–∏
            if (selectedOrganization === "–ü–æ–¥—Ä—è–¥–Ω–∞—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è") {
                document.getElementById('step4Indicator').textContent = "–®–∞–≥ 2 –∏–∑ 7";
                document.getElementById('step5Indicator').textContent = "–®–∞–≥ 3 –∏–∑ 7";
                document.getElementById('step6Indicator').textContent = "–®–∞–≥ 4 –∏–∑ 7";
                document.getElementById('step7Indicator').textContent = "–®–∞–≥ 5 –∏–∑ 7";
                document.getElementById('step8Indicator').textContent = "–®–∞–≥ 6 –∏–∑ 7";
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –∫–Ω–æ–ø–∫—É –Ω–∞–∑–∞–¥ –¥–ª—è —à–∞–≥–∞ 5
                document.getElementById('step5BackButton').onclick = function() { goToStep(4); };
            } else {
                document.getElementById('step4Indicator').textContent = "–®–∞–≥ 2 –∏–∑ 8";
                document.getElementById('step5Indicator').textContent = "–®–∞–≥ 4 –∏–∑ 8";
                document.getElementById('step6Indicator').textContent = "–®–∞–≥ 5 –∏–∑ 8";
                document.getElementById('step7Indicator').textContent = "–®–∞–≥ 6 –∏–∑ 8";
                document.getElementById('step8Indicator').textContent = "–®–∞–≥ 7 –∏–∑ 8";
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –∫–Ω–æ–ø–∫—É –Ω–∞–∑–∞–¥ –¥–ª—è —à–∞–≥–∞ 5
                document.getElementById('step5BackButton').onclick = function() { goToStep(3); };
            }
        }

        function startSteps(type) {
            selectedType = type;
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            document.getElementById('stepsContainer').style.display = 'block';
            document.getElementById('progressBar').style.display = 'block';
            document.getElementById('cancelButton').style.display = 'block';
            
            // –°–±—Ä–æ—Å —Ñ–æ—Ä–º—ã
            resetForm();
            goToStep(1);
            window.scrollTo(0, 0);
        }

        function cancelSteps() {
            document.getElementById('stepsContainer').style.display = 'none';
            document.getElementById('progressBar').style.display = 'none';
            document.getElementById('cancelButton').style.display = 'none';
            showPage('pageMessages');
            resetForm();
        }

        function resetForm() {
            // –°–±—Ä–æ—Å –≤—Å–µ—Ö –ø–æ–ª–µ–π —Ñ–æ—Ä–º—ã
            document.querySelectorAll('input[type="radio"]').forEach(radio => {
                radio.checked = false;
            });
            document.querySelectorAll('.step-select, .step-input, .step-textarea').forEach(field => {
                field.value = '';
            });
            document.getElementById('transportExtra').style.display = 'none';
            document.getElementById('shopSelect').style.display = 'none';
            document.getElementById('shopInput').style.display = 'block';
            document.getElementById('placeInput').style.display = 'block';
            document.getElementById('placeLabel').style.display = 'block';
            currentStep = 1;
            selectedOrganization = "";
            selectedGroup = "";
            updateProgress(0);
        }

        function updateProgress(percent) {
            document.getElementById('progress').style.width = percent + '%';
        }

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –≤—ã–±–æ—Ä–∞ –≤ —Ñ–æ—Ä–º–µ
        function handleOrganizationSelect(organization) {
            selectedOrganization = organization;
            if (organization === "–ê–û ¬´–°–∞–º–∞—Ä–∞–Ω–µ—Ñ—Ç–µ–≥–∞–∑¬ª") {
                goToStep(2); // –ü–µ—Ä–µ—Ö–æ–¥–∏–º –∫ –≤—ã–±–æ—Ä—É –≥—Ä—É–ø–ø—ã
            } else if (organization === "–ü–æ–¥—Ä—è–¥–Ω–∞—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è") {
                goToStep(4); // –ü–µ—Ä–µ—Ö–æ–¥–∏–º –∫ –≤–≤–æ–¥—É –Ω–∞–∑–≤–∞–Ω–∏—è –ø–æ–¥—Ä—è–¥–Ω–æ–π –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏
            }
        }

        function handleGroupSelect(group) {
            selectedGroup = group;
            if (group === "–û–î–¶") {
                goToStep(5); // –î–ª—è –û–î–¶ –ø—Ä–æ–ø—É—Å–∫–∞–µ–º —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏ —Ü–µ—Ö
            } else {
                goToStep(3); // –î–ª—è –¥—Ä—É–≥–∏—Ö –≥—Ä—É–ø–ø –ø–µ—Ä–µ—Ö–æ–¥–∏–º –∫ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—é
            }
        }

        function handleManagementChange() {
            const management = document.getElementById('managementSelect').value;
            const shopSelect = document.getElementById('shopSelect');
            const shopInput = document.getElementById('shopInput');
            
            if (!management) return;
            
            if (management === "–ù–µ—Ç –≤ —Å–ø–∏—Å–∫–µ" || management === "–ù–µ –∑–Ω–∞—é") {
                shopSelect.style.display = 'none';
                shopInput.style.display = 'block';
                shopInput.value = management;
            } else if (structures[management]) {
                shopInput.style.display = 'none';
                shopSelect.style.display = 'block';
                shopSelect.innerHTML = '<option value="">-- –≤—ã–±—Ä–∞—Ç—å --</option>';
                structures[management].forEach(s => {
                    const opt = document.createElement('option');
                    opt.value = s;
                    opt.textContent = s;
                    shopSelect.appendChild(opt);
                });
            } else {
                shopSelect.style.display = 'none';
                shopInput.style.display = 'none';
            }
        }

        function handleAreaChange() {
            const area = document.getElementById('areaSelect').value;
            
            if (selectedGroup === "–û–î–¶") {
                document.getElementById('placeLabel').textContent = "–ú–µ—Å—Ç–æ –Ω–∞—Ä—É—à–µ–Ω–∏—è:";
                document.getElementById('placeInput').placeholder = "–ù–∞–ø—Ä–∏–º–µ—Ä: 4 —ç—Ç–∞–∂:–ª–µ—Å—Ç–Ω–∏—Ü–∞ –∏–ª–∏ —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏—è –û–î–¶";
                
                if (area === "–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å") {
                    document.getElementById('placeInput').style.display = 'none';
                    document.getElementById('placeLabel').style.display = 'none';
                    document.getElementById('transportExtra').style.display = 'block';
                } else {
                    document.getElementById('placeInput').style.display = 'block';
                    document.getElementById('placeLabel').style.display = 'block';
                    document.getElementById('transportExtra').style.display = 'none';
                }
            } else {
                document.getElementById('placeLabel').textContent = "–û–±—ä–µ–∫—Ç/–º–µ—Å—Ç–æ –Ω–∞—Ä—É—à–µ–Ω–∏—è:";
                document.getElementById('placeInput').placeholder = "–ù–∞–ø—Ä–∏–º–µ—Ä: –£–ü–ù –ê–ª–∞–∫–∞–µ–≤—Å–∫–∞—è, –∑–¥–∞–Ω–∏–µ –æ–ø–µ—Ä–∞—Ç–æ—Ä–Ω–æ–π";
                document.getElementById('placeInput').style.display = 'block';
                document.getElementById('placeLabel').style.display = 'block';
                
                if (area === "–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å") {
                    document.getElementById('transportExtra').style.display = 'block';
                } else {
                    document.getElementById('transportExtra').style.display = 'none';
                }
            }
        }

        // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è –∫–Ω–æ–ø–æ–∫ "–î–∞–ª–µ–µ"
        function nextFromStep3() {
            const management = document.getElementById('managementSelect').value;
            if (!management) {
                alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ');
                return;
            }
            goToStep(5); // –ü–µ—Ä–µ—Ö–æ–¥–∏–º –∫ —Ü–µ—Ö—É/—É—á–∞—Å—Ç–∫—É
        }

        function nextFromStep4() {
            const contractor = document.getElementById('contractorInput').value.trim();
            if (!contractor) {
                alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –ø–æ–¥—Ä—è–¥–Ω–æ–π –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏');
                return;
            }
            goToStep(5); // –ü–µ—Ä–µ—Ö–æ–¥–∏–º –∫ –æ–±–ª–∞—Å—Ç–∏ –Ω–∞—Ä—É—à–µ–Ω–∏—è (–ø—Ä–æ–ø—É—Å–∫–∞–µ–º —Ü–µ—Ö –¥–ª—è –ø–æ–¥—Ä—è–¥–Ω—ã—Ö)
        }

        function nextFromStep5() {
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –∑–∞–ø–æ–ª–Ω–µ–Ω–æ –ª–∏ –ø–æ–ª–µ —Ü–µ—Ö–∞/—É—á–∞—Å—Ç–∫–∞ (—Ç–æ–ª—å–∫–æ –¥–ª—è –ê–û –°–∞–º–∞—Ä–∞–Ω–µ—Ñ—Ç–µ–≥–∞–∑)
            if (selectedOrganization === "–ê–û ¬´–°–∞–º–∞—Ä–∞–Ω–µ—Ñ—Ç–µ–≥–∞–∑¬ª" && selectedGroup !== "–û–î–¶") {
                const shopSelect = document.getElementById('shopSelect');
                const shopInput = document.getElementById('shopInput');
                let shopValue = "";
                
                if (shopSelect.style.display !== 'none') {
                    shopValue = shopSelect.value;
                } else if (shopInput.style.display !== 'none') {
                    shopValue = shopInput.value;
                }
                
                if (!shopValue) {
                    alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ –∏–ª–∏ –≤–≤–µ–¥–∏—Ç–µ —Ü–µ—Ö/—É—á–∞—Å—Ç–æ–∫');
                    return;
                }
            }
            goToStep(6); // –ü–µ—Ä–µ—Ö–æ–¥–∏–º –∫ –æ–±–ª–∞—Å—Ç–∏ –Ω–∞—Ä—É—à–µ–Ω–∏—è
        }

        function nextFromStep6() {
            const area = document.getElementById('areaSelect').value;
            if (!area) {
                alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ –æ–±–ª–∞—Å—Ç—å –Ω–∞—Ä—É—à–µ–Ω–∏—è');
                return;
            }
            goToStep(7); // –ü–µ—Ä–µ—Ö–æ–¥–∏–º –∫ –º–µ—Å—Ç—É –Ω–∞—Ä—É—à–µ–Ω–∏—è
        }

        function nextFromStep7() {
            const place = document.getElementById('placeInput').value.trim();
            const transport = document.getElementById('transportInput').value.trim();
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–∏–ø–∞ –Ω–∞—Ä—É—à–µ–Ω–∏—è
            if (document.getElementById('areaSelect').value === "–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å") {
                if (!transport) {
                    alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —É–∫–∞–∂–∏—Ç–µ –º–∞—Ä–∫—É –∏–ª–∏ –≥–æ—Å.–Ω–æ–º–µ—Ä —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω–æ–≥–æ —Å—Ä–µ–¥—Å—Ç–≤–∞');
                    return;
                }
            } else {
                if (!place) {
                    alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —É–∫–∞–∂–∏—Ç–µ –º–µ—Å—Ç–æ –Ω–∞—Ä—É—à–µ–Ω–∏—è');
                    return;
                }
            }
            goToStep(8); // –ü–µ—Ä–µ—Ö–æ–¥–∏–º –∫ –æ–ø–∏—Å–∞–Ω–∏—é –Ω–∞—Ä—É—à–µ–Ω–∏—è
        }

        function sendMessage() {
            const desc = document.getElementById('descInput').value.trim();
            if (!desc) {
                alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ–ø–∏—à–∏—Ç–µ –Ω–∞—Ä—É—à–µ–Ω–∏–µ');
                return;
            }

            // –°–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö –∏–∑ —Ñ–æ—Ä–º—ã
            const organization = selectedOrganization || "–ù–µ —É–∫–∞–∑–∞–Ω–æ";
            const group = selectedGroup || "";
            const management = document.getElementById('managementSelect').value || "";
            const contractor = document.getElementById('contractorInput').value || "";
            
            let shop = "";
            const shopSelect = document.getElementById('shopSelect');
            const shopInput = document.getElementById('shopInput');
            if (shopSelect.style.display !== 'none' && shopSelect.value) {
                shop = shopSelect.value;
            } else if (shopInput.style.display !== 'none' && shopInput.value) {
                shop = shopInput.value;
            }
            
            const area = document.getElementById('areaSelect').value || "";
            const place = document.getElementById('placeInput').value || "";
            const transport = document.getElementById('transportInput').value || "";
            
            // –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è
            let message = `–°–æ–æ–±—â–µ–Ω–∏–µ –æ –Ω–∞—Ä—É—à–µ–Ω–∏–∏:\n\n`;
            message += `–û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è: ${organization}`;
            
            if (organization === "–ê–û ¬´–°–∞–º–∞—Ä–∞–Ω–µ—Ñ—Ç–µ–≥–∞–∑¬ª") {
                if (group) message += `\n–ì—Ä—É–ø–ø–∞: ${group}`;
                if (management) message += `\n–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: ${management}`;
            }
            
            if (organization === "–ü–æ–¥—Ä—è–¥–Ω–∞—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è" && contractor) {
                message += `\n–ü–æ–¥—Ä—è–¥–Ω–∞—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è: ${contractor}`;
            }
            
            if (shop) message += `\n–¶–µ—Ö/—É—á–∞—Å—Ç–æ–∫: ${shop}`;
            if (area) message += `\n–û–±–ª–∞—Å—Ç—å –Ω–∞—Ä—É—à–µ–Ω–∏—è: ${area}`;
            
            // –î–ª—è –û–î–¶ —É–∫–∞–∑—ã–≤–∞–µ–º –º–µ—Å—Ç–æ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –Ω–µ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
            if (group === "–û–î–¶") {
                if (area !== "–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å" && place) {
                    message += `\n–ú–µ—Å—Ç–æ –Ω–∞—Ä—É—à–µ–Ω–∏—è: ${place}`;
                }
            } else {
                if (place) message += `\n–û–±—ä–µ–∫—Ç/–º–µ—Å—Ç–æ: ${place}`;
            }
            
            if (area === "–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å" && transport) {
                message += `\n–ú–∞—Ä–∫–∞/–≥–æ—Å.–Ω–æ–º–µ—Ä: ${transport}`;
            }
            
            message += `\n\n–û–ø–∏—Å–∞–Ω–∏–µ –Ω–∞—Ä—É—à–µ–Ω–∏—è:\n${desc}`;

            // –û—Ç–ø—Ä–∞–≤–∫–∞ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —Ç–∏–ø–∞
            if (selectedType === 'wa') {
                window.open(`https://wa.me/79371809021?text=${encodeURIComponent(message)}`, '_blank');
            } else if (selectedType === 'tg') {
                window.open(`https://t.me/+79371809021?text=${encodeURIComponent(message)}`, '_blank');
            } else if (selectedType === 'sms') {
                window.location.href = `sms:+79371809021?body=${encodeURIComponent(message)}`;
            }
            
            alert('–°–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–æ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏!');
            cancelSteps();
        }

        // –û—Å—Ç–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
        function makeCall() {
            window.open('tel:+79371809021');
        }

        function openRules() {
            alert('–ó–æ–ª–æ—Ç—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ - –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è PDF –¥–æ–∫—É–º–µ–Ω—Ç');
        }

        function openFirstAid() {
            alert('–ü–∞–º—è—Ç–∫–∞ –ø–µ—Ä–≤–æ–π –ø–æ–º–æ—â–∏ - –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è PDF –¥–æ–∫—É–º–µ–Ω—Ç');
        }

        // PWA —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
        let deferredPrompt;
        const installPrompt = document.getElementById('installPrompt');

        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            setTimeout(() => {
                if (deferredPrompt) installPrompt.style.display = 'block';
            }, 3000);
        });

        function installApp() {
            if (deferredPrompt) {
                deferredPrompt.prompt();
                deferredPrompt.userChoice.then((choiceResult) => {
                    deferredPrompt = null;
                    installPrompt.style.display = 'none';
                });
            }
        }

        function dismissPrompt() {
            installPrompt.style.display = 'none';
        }

        if ('serviceWorker' in navigator) {
            window.addEventListener('load', function() {
                navigator.serviceWorker.register('sw.js')
                    .catch(error => console.log('SW error:', error));
            });
        }
    </script>
</body>
</html>